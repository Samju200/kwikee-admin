<div class="greetings-area mt-5">
  <div class="row justify-content-between">
    <div class="col-md-6 col-lg-5">
      <h4>KwikGoal Rate</h4>
      <p>Manage the current KwikGoal interest rate</p>
    </div>
  </div>
</div>

<div class="mt-5">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <div *ngIf="loading" class="text-center">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

          <div *ngIf="!loading">
            <div *ngIf="currentRate !== null; else noRate">
              <div class="mb-4">
                <h5>Current Rate</h5>
                <p class="display-4">{{ currentRate | number : "1.2-2" }}%</p>
              </div>

              <div class="rate-form">
                <h5 class="mb-3">Update Rate</h5>
                <div class="row align-items-end">
                  <div class="col-md-4">
                    <label class="form-label">New Rate (%)</label>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      [(ngModel)]="newRate"
                      min="0"
                    />
                  </div>
                  <div class="col-md-4">
                    <button
                      class="btn btn-primary"
                      (click)="updateRate()"
                      [disabled]="loading || newRate <= 0"
                    >
                      Update Rate
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <ng-template #noRate>
              <div
                class="p-3 d-flex align-items-center flex-column justify-content-center"
              >
                <svg
                  style="width: 1.5rem; height: 1.5rem"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                  ></path>
                </svg>
                <span style="font-size: 14px" class="mt-2">
                  No KwikGoal rate has been set yet
                </span>
              </div>

              <div class="rate-form mt-4">
                <h5 class="mb-3">Set Initial Rate</h5>
                <div class="row align-items-end">
                  <div class="col-md-4">
                    <label class="form-label">Rate (%)</label>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      [(ngModel)]="newRate"
                      min="0"
                    />
                  </div>
                  <div class="col-md-4">
                    <button
                      class="btn btn-primary"
                      (click)="updateRate()"
                      [disabled]="loading || newRate <= 0"
                    >
                      Set Rate
                    </button>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
